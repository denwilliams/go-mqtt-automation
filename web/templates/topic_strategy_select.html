{{template "base" .}}

{{define "topic-strategy-select-content"}}
<h2>Create New Topic - Select Strategy</h2>

<p>Choose the strategy that will process inputs for your new topic:</p>

<div class="row">
    {{range .Strategies}}
    <div class="col-md-6 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{.Name}}</h5>
                <p class="card-text">
                    <strong>Language:</strong> {{.Language}}<br>
                    <strong>Max Inputs:</strong> {{if gt .MaxInputs 0}}{{.MaxInputs}}{{else}}Unlimited{{end}}<br>
                    {{if .DefaultInputNames}}
                    <strong>Suggested Input Names:</strong> {{range $i, $name := .DefaultInputNames}}{{if $i}}, {{end}}"{{$name}}"{{end}}<br>
                    {{end}}
                </p>
                <div class="strategy-code-preview">
                    <small><strong>Code Preview:</strong></small>
                    <pre style="font-size: 12px; max-height: 100px; overflow: hidden;">{{if gt (len .Code) 200}}{{slice .Code 0 200}}...{{else}}{{.Code}}{{end}}</pre>
                </div>
                <a href="/topics/new/{{.ID}}" class="btn btn-primary">Use This Strategy</a>
            </div>
        </div>
    </div>
    {{end}}
</div>

<div style="margin-top: 2rem;">
    <a href="/topics" class="btn btn-secondary">Cancel</a>
    <a href="/strategies/new" class="btn btn-outline-primary">Create New Strategy</a>
</div>
{{end}}